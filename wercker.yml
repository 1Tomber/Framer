box: nolimitid/node-phantom-npm3

build:
    steps:
        - add-to-known_hosts:
            hostname: github.com
            fingerprint: ad:1c:08:a4:40:e3:6f:9c:f5:66:26:5d:4b:33:5d:8c
        - script:
            name: load git revisions
            code: |
                ssh-keyscan github.com >> ~/.ssh/known_hosts
                cd $WERCKER_SOURCE_DIR
                git fetch --unshallow
        - script:
            name: set up permissions
            code: |
                export NODE_ENV=development
                chmod 777 -R .
                chmod 777 -R $WERCKER_CACHE_DIR
        - npm-test

deploy:
    steps:
        - script:
            name: set up permissions
            code: |
                export NODE_ENV=development
                chmod 777 -R .
                chmod 777 -R $WERCKER_CACHE_DIR
        - install-packages:
            packages: zip
        - script:
            name: builds.framerjs.com
            code: make deploy

# $WERCKER_OUTPUT_DIR